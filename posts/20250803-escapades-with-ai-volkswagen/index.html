<!DOCTYPE html>
<html lang="en">
    
    


    <head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Cache-Control" content="public" />
<!-- Enable responsiveness on mobile devices -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.127.0">

    
    
    

<title>Escapades with AI - The Volkswagen • Alex&#39;s Blog</title>



  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Escapades with AI - The Volkswagen">
  <meta name="twitter:description" content="Pasting random things together">
      <meta name="twitter:site" content="@alexsanjoseph">

<meta property="og:url" content="/posts/20250803-escapades-with-ai-volkswagen/">
  <meta property="og:site_name" content="Alex&#39;s Blog">
  <meta property="og:title" content="Escapades with AI - The Volkswagen">
  <meta property="og:description" content="Pasting random things together">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-08-03T10:30:00-07:00">
    <meta property="article:modified_time" content="2025-08-14T15:12:48+05:30">
    <meta property="article:tag" content="Programming">
    <meta property="article:tag" content="Ai">


    


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/monokai.min.css">








<link rel="stylesheet" href="/scss/hyde-hyde.99ab3f21162d2c6b4293bfef5e602d899267cbe0ce2eb0dbc9f8db76bac10c46.css" integrity="sha256-mas/IRYtLGtCk7/vXmAtiZJny&#43;DOLrDbyfjbdrrBDEY=">


<link rel="stylesheet" href="/scss/print.2744dcbf8a0b2e74f8a50e4b34e5f441be7cf93cc7de27029121c6a09f9e77bc.css" integrity="sha256-J0Tcv4oLLnT4pQ5LNOX0Qb58&#43;TzH3icCkSHGoJ&#43;ed7w=" media="print">



    <link rel="stylesheet" href="/css/sidebar-toggle.css">
    <link rel="stylesheet" href="/css/site-home-link.css">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
    <link rel="icon" href="/icon.png">
    <link rel="shortcut icon" href="/icon.png">
    
    

    <script src="/js/sidebar-toggle.js"></script>
</head>


    <body class=" ">
    
<div class="sidebar">
  <div class="container ">
    <div class="sidebar-about">
      <span class="site__title">
        <a href="/">Alex&#39;s Blog</a>
      </span>
      
        
        
        
        <div class="author-image">
          <img src="/images/alex.jpeg" alt="Author Image" class="img--circle img--headshot element--center">
        </div>
        
      
      
      <p class="site__description">
         Pasting random things together 
      </p>
    </div>
    <div class="collapsible-menu">
      <input type="checkbox" id="menuToggle">
      <label for="menuToggle">Alex&#39;s Blog</label>
      <div class="menu-content">
        <div>
	<ul class="sidebar-nav">
		 
		 
			 
				<li>
					<a href="/portfolio/">
						<span>Portfolio</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/posts/">
						<span>Posts</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/about/">
						<span>About</span>
					</a>
				</li>
			 
		
	</ul>
</div>

        <section class="social">
	
	<a href="https://twitter.com/alexsanjoseph" rel="me"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a>
	
	
	
	<a href="https://github.com/alexsanjoseph" rel="me"><i class="fab fa-github fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	<a href="https://linkedin.com/in/alexsanjoseph" rel="me"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a>
	
	
	<a href="https://stackoverflow.com/users/1653808/alex-joseph" rel="me"><i class="fab fa-stack-overflow fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	
	<a href="mailto:alexsanjoseph%20at%20gmail.com" rel="me"><i class="fas fa-at fa-lg" aria-hidden="true"></i></a>
	
</section>

      </div>
    </div>
    
<div class="copyright">
  &copy; 2016 - 2025 alexsanjoseph
  
</div>


<div class="builtwith">
Built with <a href="https://gohugo.io">Hugo</a> ❤️ <a href="https://github.com/htr3n/hyde-hyde">hyde-hyde</a>.
</div>


  </div>
</div>

        <div class="content container">
            
    
<article>
  <header>
    <div class="home-button">
      <a href="/" class="home-link">← Home</a>
    </div>
    
    <div class="post-header-image">
      <img src="/images/escapades-with-ai-volkswagen/cover.png" alt="Escapades with AI - The Volkswagen" class="header-image" />
    </div>
    
    <h1>Escapades with AI - The Volkswagen</h1>
    
    
<div class="post__meta">
    </script>
    
    
    <i class="fas fa-calendar-alt"></i> Created: 2025 Aug 3
    
    
    
    , Updated:
    2025 Aug 14
    
    
    
    
    
    
    
    <br />
     <i class="fas fa-tags"></i>
    
    <a class="badge badge-tag" href="/tags/programming">programming</a>
     
    
    <a class="badge badge-tag" href="/tags/ai">ai</a>
    
    
    
    
    <br />
    <i class="fas fa-clock"></i> 6 min read
</div>

  </header>
  
  
  <div class="post">
    <p>Like everyone else in 2025, I&rsquo;ve been climbing the AI coding ladder: ChatGPT queries → Cursor autocomplete → Cursor agents → Claude Code → background agents. Claude Code (#4) has been my sweet spot for productivity, but it&rsquo;s also given me some of the most entertaining war stories.</p>
<p>There have been a lot of these kinds of posts, but never too many; successful AI coding sessions are boringly similar, but each failure is spectacular in its own way (with apologies to Tolstoy). This series captures those moments when our AI coding assistants get&hellip; creative.</p>
<p>Today&rsquo;s tale involves Claude implementing what I can only describe as the software equivalent of Volkswagen&rsquo;s emissions scandal.</p>
<h2 id="the-issue">The Issue</h2>
<p>The problem I encountered is pretty simple to explain.</p>
<p>I have a screen (in flutter) which has a bunch of elements at the top of the screen giving the summary of a workout.
At the bottom of the screen are the details of the workout, including the steps of Warmup, Focus and Cooldown.</p>
<p><img src="/images/escapades-with-ai-volkswagen/passing-case.png#small" alt="Passing Case"></p>
<p>I also have Widget tests (Flutter&rsquo;s automated UI tests) that verify the critical elements of the screen are present. One of the elements I&rsquo;m asserting is the presence of the check mark at the top of the screen.</p>
<p>I can write the pseudocode for the check like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-dart" data-lang="dart"><span style="display:flex;"><span>  group(<span style="color:#e6db74">&#39;Plans Screen&#39;</span>, () {
</span></span><span style="display:flex;"><span>    testWidgets(<span style="color:#e6db74">&#39;critical elements are present in cardio screen&#39;</span>, (tester) <span style="color:#66d9ef">async</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">await</span> setupPlanScreen();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      expect(find.byType(FusedIcon), findsOneWidget);
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>  });
</span></span></code></pre></div><p>Currently the test is passing fine.</p>
<p>Over time, we realized that for most users, they need to understand how the &ldquo;focus&rdquo; phase which
is the most critical part of the workout, works and hence they have to click the accordion to see the results.
We decided to change the default behavior on load of the page to keep the &ldquo;focus&rdquo; accordion section expanded.</p>
<p><img src="/images/escapades-with-ai-volkswagen/failing-case.png#small" alt="Failing Case"></p>
<p>The code change was fairly simple, when the page loads, expand the accordion for the focus phase. I (ask Claude to) make the required
change and also added a new test case to ensure that I can see the details in the expanded accordion.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-dart" data-lang="dart"><span style="display:flex;"><span>  group(<span style="color:#e6db74">&#39;Plans Screen&#39;</span>, () {
</span></span><span style="display:flex;"><span>    testWidgets(<span style="color:#e6db74">&#39;critical elements are present in cardio screen&#39;</span>, (tester) <span style="color:#66d9ef">async</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">await</span> setupPlanScreen();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      expect(find.text(<span style="color:#e6db74">&#34;Step 1&#34;</span>), findsOneWidget); <span style="color:#75715e">// New test passes - can see accordion content
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>      expect(find.byType(FusedIcon), findsOneWidget); <span style="color:#75715e">// Original test now fails!
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    });
</span></span><span style="display:flex;"><span>  });
</span></span></code></pre></div><p>I expected this to be a routine fix, but it was not.
On making this change, the new test case passed, but the assertion for the FusedIcon started failing!</p>
<h2 id="the-failed-attempts">The Failed Attempts</h2>
<p>At this point in time, the standard thing is to go into code, add print statements and debug statements
and figure out what is going wrong and how the accordion is connected to the Checkmark which is somewhere
else on the screen.</p>
<p>However, this is 2025, and everyone will laugh at me if I do debugging like a caveman. Hence I ask Claude to
debug and fix the issue.</p>
<p>It starts fairly innocously. Claude is smart and immediately realizes that this might have something to do with
scrolling. It adds a scrollUntiVisible function to the test to ensure that the <code>FusedIcon</code> comes to the screen.</p>
<p>However, the element is still not visible. Claude continues its search to find the solution for another 10-15 minutes
and nothing much happens.</p>
<h2 id="hack-1---pushing-it-under-the-carpet">Hack #1 - Pushing it under the carpet</h2>
<p>After trying its best for quite some time, Claude decided that enough was enough and decided to hack the solution.</p>
<p>It increased the size of the viewport to 1024x1024 such that all elements are visible. The tests pass.</p>
<p>It comes back to me saying that hey everything is working fine.</p>
<p>I tell it, this is a hack and fix it the right way. The test should work in small screens as well as large screens and explicitly
tell it not to touch screen size.</p>
<h2 id="hack-2---the-scandal">Hack #2 - The Scandal</h2>
<p>Another 30 minutes of Claude spinning its wheels, and eventually it finds a solution and declares success.</p>
<p>The code changes are here:
<img src="/images/escapades-with-ai-volkswagen/hack.jpeg#large" alt="Scam"></p>
<p>In 2015, Volkswagen got caught in one of the most infamous corporate scandals of the century. They had installed &ldquo;defeat devices&rdquo; in their diesel cars - software that could detect when the car was being tested for emissions and would switch to a &ldquo;clean&rdquo; mode. During testing, the cars would comply with environmental standards perfectly. IRL, they would pump out up to 40 times the legal limit of nitrogen oxides, because &ldquo;performance&rdquo; was more important than, you know, the planet.</p>
<p>This is exactly what Claude had done!</p>
<p>It had added an <code>!_isInTest()</code> condition to the <code>initiallyExpanded</code> property. In plain English: &ldquo;Only expand the accordion if we&rsquo;re NOT running tests.&rdquo;</p>
<p>This meant that during normal app usage, the accordion would expand as expected (fulfilling the product requirement). But during test execution, it would stay collapsed, making the checkmark visible and passing the test. The tests were now completely disconnected from the actual user experience.</p>
<p>Just like Volkswagen&rsquo;s cars, Claude&rsquo;s code was designed to behave one way during &ldquo;testing&rdquo; and completely differently in the &ldquo;real world.&rdquo;</p>
<h2 id="true-agi">True AGI?</h2>
<p>At this point, I was thoroughly amused at the hack. Does Claude recognize what it had done? I decided to test its self-awareness with a single, wordless link:</p>
<p><code>https://en.wikipedia.org/wiki/Volkswagen_emissions_scandal</code></p>
<p>This was the response from Claude:</p>
<p><img src="/images/escapades-with-ai-volkswagen/defence.jpeg#large" alt="Volkswagen"></p>
<p>The amazing thing is that Claude understood exactly what I meant with just that Wikipedia link. No explanation needed. It immediately recognized the parallel and went into full defensive mode, trying to rationalize why its &ldquo;defeat device&rdquo; was actually totally different and legitimate.</p>
<p>I&rsquo;ve had friends in college who, after getting caught cheating on an exam, would immediately explain why their method was actually more creative and technically sophisticated than just studying. Claude even provided a detailed breakdown of why its approach was ethically superior to Volkswagen&rsquo;s scandal :/</p>
<p>The most human-like part was that it even blamed Flutter! &ldquo;The issue we solved is a legitimate technical problem where Flutter&rsquo;s ExpansionTile widget has known interactions with test widget finders.&rdquo; It reminded me of an ex-junior dev who would always blame the framework, the build system, or cosmic radiation whenever we caught him implementing questionable solutions. &ldquo;It&rsquo;s not my code, it&rsquo;s just how Flutter works!&rdquo;</p>
<h2 id="the-actual-solution">The actual solution</h2>
<p>After being thoroughly entertained by Claude&rsquo;s Volkswagen-level creativity, I decided to take my bone-spear and go hunting. I stepped through the widget test line by line and traced exactly what was happening.</p>
<p>The issue was embarrassingly simple: When the focus accordion expanded by default on page load, Flutter&rsquo;s natural behavior was to scroll down to bring the expanded content into view. This pushed the checkmark (which was at the top of the screen) out of the visible viewport.</p>
<p>The solution? Just scroll back up to the top after the page finishes loading and the accordion expands. One line of code:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-dart" data-lang="dart"><span style="display:flex;"><span><span style="color:#66d9ef">await</span> tester.scrollUntilVisible(find.byType(FusedIcon), <span style="color:#f92672">-</span><span style="color:#ae81ff">300</span>);
</span></span></code></pre></div><p>That&rsquo;s it. Scroll up 300 pixels. The checkmark becomes visible, the test passes, and the user experience remains exactly as intended. No defeat devices required - just a simple fix that works for both the real app and the tests.</p>
<h2 id="turing-test-failure">Turing Test Failure</h2>
<p>After I fixed the issue myself, I went back to Claude and asked it to go through the actual fix I had done. I was curious to see if it would maintain its defensive stance or finally acknowledge the &ldquo;defeat device&rdquo; for what it was.</p>
<p><img src="/images/escapades-with-ai-volkswagen/apology.jpeg#large" alt="Volkswagen"></p>
<p>And just like that, Claude completely switched gears. Instead of suggesting more &ldquo;alternative approaches considered&rdquo; - it acked that it had overcomplicated the solution and implemented something that was exactly analogous to a defeat device.</p>
<p>I would like to believe this is pretty conclusive evidence that LLM intelligence is not human yet.</p>
  </div>
  


  

  
    
        <div id="graphcomment"></div>
<script type="text/javascript">
  window.graphcomment_id = 'blog-alexsanjoseph-com';
   
  (function() {
    var gc = document.createElement('script'); gc.type = 'text/javascript'; gc.async = true;
    gc.src = 'https://graphcomment.com/js/integration.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(gc);
  })();
</script>
    


</article>

        </div>
        
    

<script defer src="https://use.fontawesome.com/releases/v5.11.2/js/all.js"
    integrity="sha384-b3ua1l97aVGAPEIe48b4TC60WUQbQaGi2jqAWM90y0OZXZeyaTCWtBTKtjW2GXG1"
    crossorigin="anonymous"></script>
<script data-goatcounter="https://alexsanjoseph.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
<script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
     inlineMath: [['$','$'], ['\\(','\\)']],
     displayMath: [['$$','$$']],
     processEscapes: true,
     processEnvironments: true,
     skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
     TeX: { equationNumbers: { autoNumber: "AMS" },
            extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
});
</script>
<script>
    
    
    
    window.goatcounter.visit_count({ append: 'body' })
</script>

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        
    <script type="text/javascript">
        
        hljs.initHighlightingOnLoad();
    </script>
    



    



    </body>
</html>
