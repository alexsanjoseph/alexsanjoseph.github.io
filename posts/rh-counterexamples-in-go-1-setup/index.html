<!DOCTYPE html>
<html lang="en">
    
    


    <head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Cache-Control" content="public" />
<!-- Enable responsiveness on mobile devices -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.88.1" />

    
    
    

<title>Searching for RH Counterexamples in Golang - Setting up • Alex&#39;s Blog</title>


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Searching for RH Counterexamples in Golang - Setting up"/>
<meta name="twitter:description" content=""/>

<meta property="og:title" content="Searching for RH Counterexamples in Golang - Setting up" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/rh-counterexamples-in-go-1-setup/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-01-16T10:17:52+00:00" />
<meta property="article:modified_time" content="2022-01-26T12:39:37+05:30" /><meta property="og:site_name" content="Alex&#39;s Blog" />



    


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/monokai.min.css">








<link rel="stylesheet" href="/scss/hyde-hyde.52a3e4c42b123d9e586cf178786d09d7451c6eb9ee52cab6d47d09f2ab23bd7b.css" integrity="sha256-UqPkxCsSPZ5YbPF4eG0J10UcbrnuUsq21H0J8qsjvXs=">


<link rel="stylesheet" href="/scss/print.2744dcbf8a0b2e74f8a50e4b34e5f441be7cf93cc7de27029121c6a09f9e77bc.css" integrity="sha256-J0Tcv4oLLnT4pQ5LNOX0Qb58&#43;TzH3icCkSHGoJ&#43;ed7w=" media="print">



    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
    <link rel="icon" href="/icon.png">
    <link rel="shortcut icon" href="/icon.png">
    
    

</head>


    <body class=" ">
    
<div class="sidebar">
  <div class="container ">
    <div class="sidebar-about">
      <span class="site__title">
        <a href="/">Alex&#39;s Blog</a>
      </span>
      
        
        
        
        <div class="author-image">
          <img src="/images/alex.jpeg" alt="Author Image" class="img--circle img--headshot element--center">
        </div>
        
      
      
      <p class="site__description">
         Pasting random things together 
      </p>
    </div>
    <div class="collapsible-menu">
      <input type="checkbox" id="menuToggle">
      <label for="menuToggle">Alex&#39;s Blog</label>
      <div class="menu-content">
        <div>
	<ul class="sidebar-nav">
		 
		 
			 
				<li>
					<a href="/portfolio/">
						<span>Portfolio</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/posts/">
						<span>Posts</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/about/">
						<span>About</span>
					</a>
				</li>
			 
		
	</ul>
</div>

        <section class="social">
	
	<a href="https://twitter.com/alexsanjoseph" rel="me"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a>
	
	
	
	<a href="https://github.com/alexsanjoseph" rel="me"><i class="fab fa-github fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	<a href="https://linkedin.com/in/alexsanjoseph" rel="me"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a>
	
	
	<a href="https://stackoverflow.com/users/1653808/alex-joseph" rel="me"><i class="fab fa-stack-overflow fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	
	<a href="mailto:alexsanjoseph%20at%20gmail.com" rel="me"><i class="fas fa-at fa-lg" aria-hidden="true"></i></a>
	
</section>

      </div>
    </div>
    
<div class="copyright">
  &copy; 2016 - 2022 alexsanjoseph
  
</div>


<div class="builtwith">
Built with <a href="https://gohugo.io">Hugo</a> ❤️ <a href="https://github.com/htr3n/hyde-hyde">hyde-hyde</a>.
</div>


  </div>
</div>

        <div class="content container">
            
    
<article>
  <header>
    <h1>Searching for RH Counterexamples in Golang - Setting up</h1>
    
    
<div class="post__meta">
    </script>
    
    
    <i class="fas fa-calendar-alt"></i> Created: 2022 Jan 16
    
    
    
    , Updated:
    2022 Jan 26
    
    
    
    
    
    
    
    <br />
     <i class="fas fa-tags"></i>
    
    <a class="badge badge-tag" href="/%20/tags/golang">golang</a>
     
    
    <a class="badge badge-tag" href="/%20/tags/riemann-hypothesis">riemann-hypothesis</a>
     
    
    <a class="badge badge-tag" href="/%20/tags/kata">kata</a>
    
    
    
    
    <br />
    <i class="fas fa-clock"></i> 11 min read
</div>

  </header>
  
  
  <div class="post">
    <h2 id="motivation">Motivation</h2>
<p>There are a lot of tutorials available online on how to solve specific problems in different programming languages. However, there are few that teach the philosophy of developing a reasonable sized production quality project end-to-end with examples. For this, my favorite resource is <a href="https://jeremykun.com/tag/riemann-hypothesis/">this series of blog posts</a> by Jeremy Kun. In this series, he explains how to solve a problem using good programming practices in <code>Python</code>. This includes setting up a project using git, test-driven development, using a database, deploying the project on cloud, scaling and productionizing. I consider these absolute gold on the internet and suggest it to young developers when they&rsquo;re starting out with programming as an example of how to build a project brick-by-brick.</p>
<p>I found this resource a few years back and went over it in detail as a read-through. I have been wanting to follow it step-by-step in <code>Python</code> as <a href="https://en.wikipedia.org/wiki/Kata">Kata</a> to make sure that I understand the details of how he went through each step. However, recently, after getting fascinated with Golang - I was wondering if I could try to recreate the same in <code>Golang</code> instead of <code>Python</code>, enabling me to reify the techniques of software engineering, as well as learning <code>Golang</code> in one shot.</p>
<p>I&rsquo;m planning to chronicle my progress on this, in a series of blog posts, and on <a href="https://github.com/alexsanjoseph/riemann-divisor-sum-go">this</a> github repo, starting with this one. I will be closely following along the same path as the original with the same structure. I will try to explain the differences from the source, to keep this fairly self-standing, but to get the full benefit it might make sense to read the <a href="https://jeremykun.com/2020/09/11/searching-for-rh-counterexamples-setting-up-pytest/">original blog post</a> as well.</p>
<blockquote class="info">
    <strong><a href="https://jeremykun.com/">Jeremy Kun</a> has graciously given permission to use his post as a source. Thanks Jeremy!</strong><br>
    
</blockquote>
<h2 id="riemann-hypothesis">Riemann Hypothesis</h2>
<p><code>Riemann Hypothesis</code> is a conjecture that can be stated quite simply as (from Wikipedia):</p>
<blockquote>
<p>The Riemann zeta function has its zeros only at the negative even integers and complex numbers with real part $\frac{1}{2}$</p>
</blockquote>
<p>This seems fairly simple, but turns out to be quite difficult to understand, let alone try to find a proof for. It is considered one of the &ldquo;celebrity&rdquo; math problems that is still unsolved (especially now that <a href="https://en.wikipedia.org/wiki/Fermat%27s_Last_Theorem">Fermat&rsquo;s Last theorem</a> is no longer in the running) and is one of the unsolved <a href="https://en.wikipedia.org/wiki/Hilbert%27s_problems">Hilbert Problems</a> and one of the <a href="https://en.wikipedia.org/wiki/Millennium_Prize_Problems">Millennium Prize problems</a> worth a cool $1 Million. One of the ways the problem can be expressed is using a simpler formulation proposed <a href="https://www.emis.de/journals/JTNB/2007-2/article03.pdf">here</a>, which John Carlos <a href="https://twitter.com/johncarlosbaez/status/1402336425136168964">has paraphrased</a>, as:</p>
<blockquote>
<p>find a number n &gt; 5040 whose sum of divisors, divided by n ln(ln n), is more than $e^γ$ where $\gamma$ is Euler&rsquo;s constant.</p>
</blockquote>
<p>This kind of a problem formulation is called <a href="https://en.wikipedia.org/wiki/Witness_(mathematics)">finding a witness</a> in mathematics, where you&rsquo;re trying to prove or disprove a theorem by finding a single number that follows a particular criterion. In our case, we need to find a number such that:</p>
<p>$$ \frac{\phi(n)}{n \log(\log(n))} &gt; 1.782$$</p>
<p>Where $\phi(n)$ represents the sum of divisors of $n$. We&rsquo;re trying to do the same by manually searching for the witness, number by number, in <code>Golang</code>!</p>
<h2 id="preliminaries">Preliminaries</h2>
<p>We start out by setting up the project by starting a new repo on Github in <a href="https://github.com/alexsanjoseph/riemann-divisor-sum-go/commit/34ce28c270816ce8a5b16f86bc3599b28696e15d">this</a> commit. We can select <code>Go</code> as a language to get a <code>.gitignore</code> file for free in addition to adding the <code>MIT license</code>. A basic readme is also added which is improved further <a href="https://github.com/alexsanjoseph/riemann-divisor-sum-go/commit/d7d79f2262a58a0075f9fb33e2c140d71e885b04">here</a> to explain the motivation of this project.</p>
<h2 id="setting-up-go-modules">Setting up go modules</h2>
<p><code>Go</code> has the concept of a module, which is a collection of <code>Go</code> packages stored in a file tree. Similar to the python <code>__init.py__</code> file, adding a <code>go.mod</code> file at the root of a tree makes it a <code>Go</code> module. Within the module, each folder is considered its own package. From the <a href="https://go.dev/blog/using-go-modules">official docs</a>:</p>
<blockquote>
<p>The go.mod file defines the module’s module path, which is also the import path used for the root directory, and its dependency requirements, which are the other modules needed for a successful build</p>
</blockquote>
<p>In our case, we just define the module now in <a href="https://github.com/alexsanjoseph/riemann-divisor-sum-go/commit/746ede5c6d69977d64775233591ad1b6f4f6f7d0">this commit</a>. We will add further dependencies as and when they&rsquo;re used.</p>
<h2 id="setting-up-tests">Setting up tests</h2>
<p>Before we write any code, we are going to start by setting up the tests. The first function we&rsquo;re going to add is the <code>DivisorSum</code> function which calculate the sum of divisors for a number. We can setup the testing without any implementation to get a failing test <a href="https://github.com/alexsanjoseph/riemann-divisor-sum-go/commit/9c62b1fc307c52c48ca2c51b870f32b96c202e6a">here</a>.</p>
<p>We started out making testing as part of the <code>riemann</code> package which contains the code. In this <a href="https://github.com/alexsanjoseph/riemann-divisor-sum-go/commit/57d60a2647f99025ab8634d79992634e5deb5530">commit</a>, we move it over to a separate <code>riemann_test</code> package which allows us to interact with the <code>riemann</code> package only through the public API. There are <a href="https://stackoverflow.com/questions/19998250/proper-package-naming-for-testing-with-the-go-language">pros and cons</a> to both approaches, but for this project, we&rsquo;re not going to worry too much about which fields and methods should be public or private (in a real project, this is something you should worry about!), so the difference is mostly stylistic.</p>
<h2 id="improving-testing">Improving testing</h2>
<p>Once we have basic testing in place and working (you can test that this is failing by running <code>go test</code> on the terminal), we can move to a better testing package. In my case, I&rsquo;m using <a href="https://onsi.github.io/ginkgo/">Ginkgo</a>. Along with the <a href="https://onsi.github.io/gomega/">Gomega</a> matching/assertion library (almost always used in conjunction with Ginkgo), Ginkgo allows us to write more expressive tests, which almost read like plain English rather than having a million <code>if-else</code> statements with the basic testing library.</p>
<p>For example, while the previous test case was simple enough with:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">TestDivisorSum</span>(<span style="color:#a6e22e">t</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">testing</span>.<span style="color:#a6e22e">T</span>) {
	<span style="color:#a6e22e">sum</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">DivisorSum</span>(<span style="color:#ae81ff">195</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">sum</span>)
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">sum</span> <span style="color:#f92672">!=</span> <span style="color:#ae81ff">72</span> {
		<span style="color:#a6e22e">t</span>.<span style="color:#a6e22e">Fatal</span>(<span style="color:#e6db74">&#34;Divisor sum doesn&#39;t match!&#34;</span>)
	}
}
</code></pre></div><p>In case of a failing error, the basic testing package outputs that the test has failed, unless any additional info is provided manually by the developer. Instead Ginkgo allows you to write the same test as</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">_</span> = <span style="color:#a6e22e">Describe</span>(<span style="color:#e6db74">&#34;Divisor&#34;</span>, <span style="color:#66d9ef">func</span>() {
	<span style="color:#a6e22e">Context</span>(<span style="color:#e6db74">&#34;Good Cases&#34;</span>, <span style="color:#66d9ef">func</span>() {
		<span style="color:#a6e22e">It</span>(<span style="color:#e6db74">&#34;Should give correct result&#34;</span>, <span style="color:#66d9ef">func</span>() {
			<span style="color:#a6e22e">output</span>, <span style="color:#a6e22e">_</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">riemann</span>.<span style="color:#a6e22e">DivisorSum</span>(<span style="color:#ae81ff">72</span>)
			<span style="color:#a6e22e">Expect</span>(<span style="color:#a6e22e">output</span>).<span style="color:#a6e22e">To</span>(<span style="color:#a6e22e">Equal</span>(<span style="color:#ae81ff">195</span>))
		})
    }
}

</code></pre></div><p>which is arguably much easier to read. More importantly, when an error is encountered, you get a nice error message like</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">Divisor
/Users/alexsanjoseph/Learning/riemann-divisor-sum-go/riemann/divisor_test.go:9
  Good Cases
  /Users/alexsanjoseph/Learning/riemann-divisor-sum-go/riemann/divisor_test.go:11
    Should give correct result <span style="color:#f92672">[</span>It<span style="color:#f92672">]</span>
    /Users/alexsanjoseph/Learning/riemann-divisor-sum-go/riemann/divisor_test.go:12

    Expected
        &lt;int64&gt;: <span style="color:#ae81ff">195</span>
    to equal
        &lt;int64&gt;: <span style="color:#ae81ff">192</span>

    /Users/alexsanjoseph/Learning/riemann-divisor-sum-go/riemann/divisor_test.go:17
</code></pre></div><p>which allows us to debug the issue easily.</p>
<p>With such a simple test, the value proposition might not be clear enough, but when the test suite gets larger and larger, having a dedicated testing library really helps to keep the code maintained and clean.</p>
<p>Installing ginkgo/gomega libraries also pull in a bunch of indirect dependencies. All of these are marked in the <code>go.mod</code> file along with the hashes in the <code>go.sum</code> file which is very similar to <code>package-lock.json</code> in <code>NodeJS</code> or <code>Pipfile.lock</code> in <code>Python</code>.</p>
<p>All of the above changes can be seen in <a href="https://github.com/alexsanjoseph/riemann-divisor-sum-go/commit/591df89e79806eea8266ee934f964fbed5f5790e">this</a> commit.</p>
<p>In addition, I have also installed the <a href="https://github.com/smartystreets/goconvey">GoConvey</a> package, which automatically runs my tests on every save and gives me a fancy UI (an example is shown <a href="#goconvey">below</a>) to show if the tests have passed or failed. (This is not captured in a commit because I have installed it globally for my other projects)</p>
<h2 id="divisor-sum---naive-implementation">Divisor Sum - Naive implementation</h2>
<p>Now that we have the basic scaffolding in place, let&rsquo;s go ahead with the implementation. To calculate the sum of divisors of a number, we have implemented a Naive algorithm which runs through every integer and checks if the said integer is a divisor. We can check that the algorithm is working (and failing) correctly by adding a bunch of tests for the different use cases. The tests are added <a href="https://github.com/alexsanjoseph/riemann-divisor-sum-go/commit/9cfdb3c1b9ed9cf85284c1897cb9f6b8e98013ad">here</a>.</p>
<p>Currently we have only one testing file and hence having the test suite handler in the file is alright, but we expect that to change pretty soon once we have more files. Hence in <a href="https://github.com/alexsanjoseph/riemann-divisor-sum-go/commit/36d306db0832f58d135005782b15b83c1972f1a1">this</a> commit, I have moved test handler to separate file for cleanliness.</p>
<p>In the previous commit, I had lazily avoided checking for errors using the underscore(<code>_</code>) variable, which is considered a bad practice. I have fixed that and added tests for errors in <a href="https://github.com/alexsanjoseph/riemann-divisor-sum-go/commit/25475ebdf5902a4fbea9e2990c8530cb611265a2">this</a> commit.</p>
<h2 id="counterexample-search">Counterexample search</h2>
<p>Now let&rsquo;s come to the the counterexample search which forms the meat of the problem. In <a href="https://github.com/alexsanjoseph/riemann-divisor-sum-go/commit/2b8308373fcadd8cfedd84a4b6c5f38a84909d46">this</a> commit, we&rsquo;ve added three functions:</p>
<ul>
<li><code>WitnessValue</code> which takes in a number and gives the Witness for that number,</li>
<li><code>Search</code> which searches across a range of numbers if a Witness exists, and</li>
<li><code>BestWitness</code>**` which finds the highest witness value in a range of numbers</li>
</ul>
<p>Tests for the same have also been added, as always.</p>
<h2 id="profiling-in-go">Profiling in Go</h2>
<p>Although our search program is ostensibly working now, as evidenced by the tests, it is excruciatingly slow. <a href="https://github.com/alexsanjoseph/riemann-divisor-sum-go/commit/82927d73750cddf0a67e95d32d54d5714056c20a">Searching across</a> the first 100K integers using the current implementation takes ~4 seconds, and 500K integers ~1.5 minutes, which is ridiculously slow if we are to reach anywhere in the large numbers.</p>
<p>To find out the bottleneck causing the program to run slow, we need to profile the code. Thankfully, <code>Go</code> has profiling implemented natively in the standard library and since we have tests for the same, this can be done very easily with</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">go test ./riemann -cpuprofile profile.out
</code></pre></div><p>This command profiles the test code and outputs the profiling info into <code>profile.out</code>. The results can be visualized using the command</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">pprof -http<span style="color:#f92672">=</span>localhost:10000 profile.out
</code></pre></div><figure class="image"><img src="/images/rh-counterexamples-in-go-1-setup/profiling_naive.avif#small"
         alt="Profiling DivisorSum naive implementation "/>
</figure>

<p>Turns out that most of our time is spent calculating in the DivisorSum! It is easy to see that we have a time complexity of $O(n^2)$, one $n$ for the loop and one $n$ since we&rsquo;re going all the way up to the number, We need to find ways to improve this function.</p>
<h2 id="improving-implementation">Improving implementation</h2>
<p>Before we go about improving the implementation, we add some <a href="https://github.com/alexsanjoseph/riemann-divisor-sum-go/commit/94b692347bff83a43d6c3631dbaef2e627f96f04">additional tests</a> to make sure that we&rsquo;re not breaking any
functionality. Copying the steps in the original post, there is an <a href="https://math.stackexchange.com/a/22744">approach by Euler</a> which recursively uses the results from a previous computation to calculate the Divisor Sum. In our case, since we&rsquo;re linearly searching across all the numbers, this allows us an opportunity for <a href="https://en.wikipedia.org/wiki/Memoization">memoization</a> and hence improved efficiency.</p>
<p>In this approach, we&rsquo;re trading computation complexity for space complexity (by caching all the previous computations) and for this we need to use some kind of cache. The original implementation uses the LRU cache, but we&rsquo;re going the simple route and instead using a <a href="https://github.com/alexsanjoseph/riemann-divisor-sum-go/commit/a309583e8580135a4412654dbb302a708482cbc1">simple hashmap as a cache</a>, since we don&rsquo;t worry too much about memory constraints.</p>
<p>On rerunning the tests, we can see that the functions are running much 2-3x faster for our samples. Faster, but not fast enough. It is still taking 2.6 seconds for calculating up to 100K.</p>
<figure class="image"><img src="/images/rh-counterexamples-in-go-1-setup/profiling_cached.avif#medium"
         alt="Profiling DivisorSum Cached implementation "/>
</figure>

<p>Rerunning the profiling, we can see that it is spending lesser time calculating the Divisor sum, but now there is definite overhead associated with the caching which is slowing things down.</p>
<h2 id="goconvey">Simpler/Faster</h2>
<p>If we look at the algorithm, we can see that we still have a time complexity of $O(n^{\frac{3}{2}})$. This same complexity can be achieved by a much simpler implementation of the naive algorithm by only computing the divisors up to $\sqrt n$ instead of blindly counting all the way up to $n$ implemented in <a href="https://github.com/alexsanjoseph/riemann-divisor-sum-go/commit/d918f89302a51f037634617c1115f2c1a78f0ada">this</a> commit. It also gets rid of the caching since that&rsquo;s not relevant anymore.</p>
<p>Rerunning the tests, the change is incredible, we&rsquo;ve gotten a benefit of two orders of magnitude in the tests and calculating up to 1M which used to take a minute happens in under a second now! We can now calculate all the way up to 10M in ~15 seconds as we can see from the <code>GoConvey</code> test output below.</p>
<figure class="image"><img src="/images/rh-counterexamples-in-go-1-setup/witness_till_10M.avif#large-left"
         alt="open in separate window to zoom"/><figcaption>
            <p>open in separate window to zoom</p>
        </figcaption>
</figure>

<blockquote class="info">
    <strong>At this point in the implementation, Jeremy uses <code>numba</code> in <code>Python</code> to invoke Just-In-Time compilation to make the python program more efficient. However, since <code>Golang</code> is already compiled, we don&rsquo;t need to do any of that! Even with <code>numba</code>, tests in <code>Python</code> are twice as fast in <code>Golang</code>!</strong><br>
    
</blockquote>
<p>Now that we have the implementation set correctly, we can <a href="https://github.com/alexsanjoseph/riemann-divisor-sum-go/commit/22d78340d18c2f4b38c36e22bb76aa347e95aa6e">improve</a> the test output better using an additional package. I also <a href="https://github.com/alexsanjoseph/riemann-divisor-sum-go/commit/93dd60d84b862c93d00491e8db1bfb16b70e01ac">removed</a> the inferior implementation since we&rsquo;re no longer planning to use them (we can always get them back any time thanks to Github!)</p>
<h2 id="benchmarking">Benchmarking</h2>
<p>Final results of the different implementation times are given in this table -</p>
<table>
<thead>
<tr>
<th><strong>Implementation/Time(s)</strong></th>
<th><strong>100K</strong></th>
<th><strong>200K</strong></th>
<th><strong>500K</strong></th>
<th><strong>1M</strong></th>
<th><strong>10M</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Naive</strong></td>
<td>4.2</td>
<td>16</td>
<td>86</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td><strong>Cached Python (from <a href="https://jeremykun.com/2020/09/11/searching-for-rh-counterexamples-setting-up-pytest/">original post</a>)</strong></td>
<td>50</td>
<td>?</td>
<td>?</td>
<td>?</td>
<td>?</td>
</tr>
<tr>
<td><strong>Cached Golang</strong></td>
<td>2.6</td>
<td>6.3</td>
<td>26</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td><strong>Square Root Python (replicated locally)</strong></td>
<td>0.06</td>
<td>0.14</td>
<td>0.46</td>
<td>1.2</td>
<td>~25</td>
</tr>
<tr>
<td><strong>Square Root Golang</strong></td>
<td>0.021</td>
<td>0.05</td>
<td>0.204</td>
<td>0.6</td>
<td>~15</td>
</tr>
</tbody>
</table>
<p>We can clearly see both the power of algorithms, and the power of programming languages 😉</p>
<h2 id="conclusion-and-next-steps">Conclusion and Next steps</h2>
<p>In this blog post, we went over setting up a project, and basic implementation of a few different algorithms in Golang. In the next post, we will bring in a database to persist our output rather than calculating the results every time from scratch.</p>
<hr>
<p><em>Credits: Thanks to Vishnu Shankar for reminding me on the importance of keeping the control variables constant in experimental design!</em></p>
  </div>
  


  

  
    
        <div id="graphcomment"></div>
<script type="text/javascript">
  window.graphcomment_id = 'blog-alexsanjoseph-com';
   
  (function() {
    var gc = document.createElement('script'); gc.type = 'text/javascript'; gc.async = true;
    gc.src = 'https://graphcomment.com/js/integration.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(gc);
  })();
</script>
    


</article>


        </div>
        
    

  
  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-179464703-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


<script defer src="https://use.fontawesome.com/releases/v5.11.2/js/all.js"
    integrity="sha384-b3ua1l97aVGAPEIe48b4TC60WUQbQaGi2jqAWM90y0OZXZeyaTCWtBTKtjW2GXG1"
    crossorigin="anonymous"></script>
<script data-goatcounter="https://alexsanjoseph.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
<script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
     inlineMath: [['$','$'], ['\\(','\\)']],
     displayMath: [['$$','$$']],
     processEscapes: true,
     processEnvironments: true,
     skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
     TeX: { equationNumbers: { autoNumber: "AMS" },
            extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
});
</script>
<script>
    
    
    
    window.goatcounter.visit_count({ append: 'body' })
</script>

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        
    <script type="text/javascript">
        
        hljs.initHighlightingOnLoad();
    </script>
    



    



    </body>
</html>
